"use strict";(self.webpackChunkjasonxddd_website=self.webpackChunkjasonxddd_website||[]).push([[530],{6984:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return o},metadata:function(){return l},toc:function(){return u},default:function(){return c}});var a=n(7462),r=n(3366),s=(n(7294),n(3905)),p=["components"],i={sidebar_position:1},o="[Next.js] Pages",l={unversionedId:"react-next-js/page",id:"react-next-js/page",isDocsHomePage:!1,title:"[Next.js] Pages",description:"\u57fa\u672c\u4f7f\u7528",source:"@site/docs/react-next-js/page.md",sourceDirName:"react-next-js",slug:"/react-next-js/page",permalink:"/docs/react-next-js/page",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/react-next-js/page.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Tutorial Intro",permalink:"/docs/intro"}},u=[{value:"\u57fa\u672c\u4f7f\u7528",id:"\u57fa\u672c\u4f7f\u7528",children:[],level:2},{value:"Pre-rendering",id:"pre-rendering",children:[{value:"Static Generation",id:"static-generation",children:[],level:3},{value:"SSR",id:"ssr",children:[],level:3}],level:2}],d={toc:u};function c(e){var t=e.components,n=(0,r.Z)(e,p);return(0,s.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"nextjs-pages"},"[Next.js]"," Pages"),(0,s.kt)("h2",{id:"\u57fa\u672c\u4f7f\u7528"},"\u57fa\u672c\u4f7f\u7528"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Route\uff1a\u53ea\u9700\u8981\u5728 ",(0,s.kt)("inlineCode",{parentName:"p"},"pages/")," \u5e95\u4e0b\u65b0\u589e\u6a94\u6848 (EX: ",(0,s.kt)("inlineCode",{parentName:"p"},"pages/hello.jsx"),")\uff0c\u5c31\u80fd\u5920\u7522\u751f\u8def\u5f91 ",(0,s.kt)("inlineCode",{parentName:"p"},"/hello"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Dynamic Route\uff1a\u6a94\u6848\u547d\u540d\u70ba ",(0,s.kt)("inlineCode",{parentName:"p"},"pages/[id].jsx"),"\uff0c\u5c31\u6703\u7522\u751f\u52d5\u614b\u8def\u5f91\uff0c",(0,s.kt)("inlineCode",{parentName:"p"},"id")," \u53ef\u4ee5\u5728 ",(0,s.kt)("inlineCode",{parentName:"p"},"router.query")," \u53d6\u5f97"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"// pages/[id].jsx\nimport { useRouter } from 'next/router'\n\nconst Post = () => {\n  const router = useRouter()\n  const { id } = router.query\n\n  return <p>Post: {id}</p>\n}\n\nexport default Post\n")))),(0,s.kt)("h2",{id:"pre-rendering"},"Pre-rendering"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Default \u662f\u958b\u7684 (P.S. \u6ce8\u610f\u8981\u5206\u6e05\u695a pre-render \u7684\u8f09\u5165\u8cc7\u6599\u3001\u4ee5\u53ca\u52d5\u614b\u7522\u751f\u7684\u8cc7\u6599\u5206\u754c)"),(0,s.kt)("li",{parentName:"ul"},"\u5169\u7a2e\u5f62\u5f0f",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Static Generation"),"\uff1aHTML \u5728 build \u7684\u6642\u5019\u5c31\u5df2\u7d93\u5efa\u7acb\u5b8c\u6210\uff0c\u5728\u8655\u7406\u6bcf\u500b Request \u7684\u6642\u5019\uff0c\u53ef\u4ee5 reuse \u9019\u4e9b\u6253\u5305\u597d\u7684\u8cc7\u6e90\u3002"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"SSR"),"\uff1aHTML \u6703\u518d\u8655\u7406\u6bcf\u500b Request \u7684\u6642\u5019\u7522\u751f\u3002")))),(0,s.kt)("h3",{id:"static-generation"},"Static Generation"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"\u5206\u5169\u7a2e\u72c0\u6cc1"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},"Without Data"),"\uff1a\u5c31\u55ae\u7d14\u975c\u614b\u9801\u9762\u5566\uff0c\u6703 build \u51fa\u7d14 HTML")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},"With Data"),"\uff1a\u5c31\u662f\u9700\u8981\u52d5\u614b\u8cc7\u6599\u7522\u751f\u756b\u9762\uff0c\u5206\u6210\u5169\u7a2e\u6642\u6a5f\uff1a"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Page ",(0,s.kt)("strong",{parentName:"p"},"Content")," Depends\uff1a\u9801\u9762\u900f\u904e AJAX \u7522\u751f\u8cc7\u6599\uff0c\u8981\u7528 ",(0,s.kt)("inlineCode",{parentName:"p"},"getStaticProps()")," \u9810\u8655\u7406\u8cc7\u6599\u8f09\u5165"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"// pages/blog.jsx\nfunction Blog({ posts }) {\n  // Render posts...\n}\n\n// This function gets called at build time\nexport async function getStaticProps() {\n  // Call an external API endpoint to get posts\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // By returning { props: { posts } }, the Blog component\n  // will receive `posts` as a prop at build time\n  return {\n    props: {\n      posts,\n    },\n  }\n}\n\nexport default Blog\n"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Page ",(0,s.kt)("strong",{parentName:"p"},"Path")," Depends\uff1a\u52d5\u614b\u8def\u7531\u7522\u751f\u7684 query \u4e26\u52d5\u614b\u53d6\u5f97\u8cc7\u6599\uff0c\u7528 ",(0,s.kt)("inlineCode",{parentName:"p"},"getStaticPaths()")," \u9810\u8655\u7406\u8f09\u5165\uff0c\u7576\u7136\u4e5f\u53ef\u4ee5\u7528 ",(0,s.kt)("inlineCode",{parentName:"p"},"getStaticProps({params})")," \u88e1\u7684 params \u4f86\u53d6 query \u503c\u4e5f\u884c\u3002"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"// pages/[id].jsx\n\n// This function gets called at build time\nexport async function getStaticPaths() {\n  // Call an external API endpoint to get posts\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // Get the paths we want to pre-render based on posts\n  const paths = posts.map((post) => ({\n    params: { id: post.id },\n  }))\n\n  // We'll pre-render only these paths at build time.\n  // { fallback: false } means other routes should 404.\n  return { paths, fallback: false }\n}\n//-------------------------------------------------------------------------\n// same with\nfunction Post({ post }) {\n  // Render post...\n}\n\nexport async function getStaticPaths() {\n  // ...\n}\n\n// This also gets called at build time\nexport async function getStaticProps({ params }) {\n  // params contains the post `id`.\n  // If the route is like /posts/1, then params.id is 1\n  const res = await fetch(`https://.../posts/${params.id}`)\n  const post = await res.json()\n\n  // Pass post data to the page via props\n  return { props: { post } }\n}\n\nexport default Post\n")))))))),(0,s.kt)("h3",{id:"ssr"},"SSR"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"\u8655\u7406\u5168\u90e8\u7684 Request \u8acb\u6c42\uff0c\u7528 ",(0,s.kt)("inlineCode",{parentName:"p"},"getServerProps()")," \u4f86\u9810\u8655\u7406\u8cc7\u6599"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"function Page({ data }) {\n  // Render data...\n}\n\n// This gets called on every request\nexport async function getServerSideProps() {\n  // Fetch data from external API\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  // Pass data to the page via props\n  return { props: { data } }\n}\n\nexport default Page\n")))))}c.isMDXComponent=!0}}]);